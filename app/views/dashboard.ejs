<div  id="dashboard" v-cloak>
    <div class="container">

    <!-- Title & view selector -->
        <div class="col col-12 mb4">
            <h1 class="dashboard-title">Mijn Dashboard</h1>
        </div>

        <!-- Loader gif -->
        <div class="col col-12 loader-airbox" v-show="!dataStats && dataErrors.length==0">
            <div class="loader">
                <span class="icon-spin3 animate-spin"></span>       
            </div>    
        </div>              

        <!-- dataStats errors -->
        <div class="col col-12 loader-airbox mt10" v-if="dataErrors.length > 0">
            <div class="col col-12 center" >
                <p>Oeps!</p>
                <p v-for="msg in dataErrors">{{ msg }}</p>
            </div>
        </div>

        <!-- Big stats -->
        <div v-bind:class="{ 'bigstats-airbox' : dataErrors.length==0 }" class="col col-12">
            <!-- TB + Piechart -->    
            <div class="col col-12 mt4"> 
                <div class="col col-6">
                    <canvas id="statsChart"></canvas>
                </div>
                <div class="col col-6 stat-title"  v-if="dataStats">
                    <p class="storage" v-if="dataStats.terabytes < 1024">
                            <span class="massivetext">{{ dataStats.terabytes }} </span>
                            <span class="item">Terabytes</span>
                    </p>
                    <p class="storage" v-else>
                        <span class="massivetext">{{ Math.round(dataStats.terabytes / 10.24) / 100 }} </span>
                        <span class="item">Petabytes</span>   
                    </p>
                </div>    
            </div>

            <!-- Big general stats -->
            <div class="col col-12 general" v-if="dataStats">         
                <div class="col sm-col-4 p3 stat">
                    <p class="stat-title">
                        Geregistreerd
                    </p>
                    <p class="orange number">
                        <span class="bigtext">{{{ numberWithSpaces(dataStats.registered) }}}</span>
                        <span class="item">items</span>
                    </p>

                </div>

                <div class="col sm-col-4 p3 stat">
                    <p class="stat-title">
                        Gedigitaliseerd
                    </p>
                    <p class="blue number">
                        <span class="bigtext">{{{ numberWithSpaces(dataStats.digitised) }}}</span>
                        <span class="item">items</span>
                    </p>
                    
                </div>
                <div class="col sm-col-4 p3 stat">
                    <p class="stat-title">
                        Gearchiveerd
                    </p>
                    <p class="purple number">
                        <span class="bigtext">{{{ numberWithSpaces(dataStats.archived) }}}</span>
                        <span class="item">items</span> 
                    </p>
                    
                </div>
            </div>    
        </div> <!-- End of big stats -->

        <!-- Graphs  -->  
        <div class="col col-12 mb4 graphcontainer" v-for="graph in graphs"> 
            <div class="col col-12">
                <div class="col col-12">
                    <h3 class="graphtitle">{{ graph.chartTitle }}</h3>
                </div>
                <div class="graphs-btns-container col col-5">
                    <div class="sub-graphs-btns-container" >
                        <a href="#" 
                            @click.prevent="refreshGraph(graph, 0)"
                            v-bind:class="{ 'active': graph.chartFormat == 0 } " >
                                Dag
                        </a>
                        <a href="#" 
                            @click.prevent="refreshGraph(graph, 1)"
                            v-bind:class="{ 'active': graph.chartFormat == 1 } " >
                                Week
                        </a>    
                    </div>
                    <div class="sub-graphs-btns-container">
                        <a href="#" 
                            @click.prevent="refreshGraph(graph, 2)"
                            v-bind:class="{ 'active': graph.chartFormat == 2 } " >
                                Maand
                        </a>
                        <a href="#" 
                            @click.prevent="refreshGraph(graph, 3)"
                            v-bind:class="{ 'active': graph.chartFormat == 3 } " >
                                Jaar
                        </a>    
                    </div>
                    
                </div>

                <div class="graphs-databtns-container col col-7">
                    <a href="#" 
                    @click.prevent="loadGraphCumulative(graph)" 
                    v-bind:class="{ 'active': graph.activeView == 'cumulative' }">
                        Cumulatief
                    </a>
                    <a href="#" 
                    @click.prevent="loadGraphEffective(graph)" 
                    v-bind:class="{ 'active': graph.activeView == 'effective' }">
                        Effectief
                    </a>
                </div>
            </div>
            
            <!-- Loader gif -->
            <div class="col col-12 loader-airbox" 
                v-if="graph.isLoading && graph.errormessages.length==0">
                <div class="loader">
                    <span class="icon-spin3 animate-spin"></span>
                </div>
            </div>   

            <!-- errors -->
            <div class="col col-12 loader-airbox">
                <div class="col col-12 center" v-show="graph.errormessages.length > 0">
                    <p>Oeps!</p>
                    <p v-for="msg in graph.errormessages">{{ msg }}</p>
                </div>
            </div>


            <canvas :id="graph.chartId" class="mb2"></canvas>   <!-- Do not put this in a v-show or v-if div/container! Thank me for your saved tears later -->

        </div><!-- End of Graphs -->

        <!-- Progress bars -->
        <div class="graphcontainer">
            

        </div> <!-- End of Progress bars -->

    
    </div>
    <%- include('footer', {}); %>
</div>